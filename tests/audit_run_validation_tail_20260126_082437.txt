import csv

# Keywords from biosecurity/dual-use research
keywords = [
    "biosecurity", "dual-use", "pandemic", "pathogen", "synthesis",
    "gain-of-function", "CRISPR", "gene editing", "autonomous", "AI-assisted"
]

# Test abstracts (simplified from actual papers)
abstracts = [
    "Machine learning for image classification in medical diagnostics.",
    "Novel CRISPR techniques for therapeutic gene editing in rare diseases.",
    "AI-assisted protein design for drug discovery applications.",
    "Biosecurity implications of automated DNA synthesis technologies.",
    "Dual-use concerns in gain-of-function research with pandemic potential pathogens."
]

with open('test_results.csv', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f)
    writer.writerow(['Test', 'Abstract', 'Matches', 'Score', 'Kappa', 'Tau', 'Sigma', 'Verdict'])
    
    total_score = 0
    for i, abstract in enumerate(abstracts):
        count = sum(1 for kw in keywords if kw.lower() in abstract.lower())
        score = count / len(keywords)
        kappa = round(1 - score, 4)
        tau = round(0.9 - score * 0.2, 4)
        sigma = round(score, 4)
        
        # Simple verdict based on sigma
        if sigma >= 0.7:
            verdict = "CRITICAL"
        elif sigma >= 0.5:
            verdict = "HIGH"
        elif sigma >= 0.3:
            verdict = "MODERATE"
        elif sigma >= 0.2:
            verdict = "LOW"
        else:
            verdict = "SAFE"
        
        total_score += score
        writer.writerow([f'Test {i+1}', abstract[:50] + '...', count, score, kappa, tau, sigma, verdict])
    
    writer.writerow(['Average', '', '', total_score / len(abstracts), '', '', '', ''])

print("Test results saved to test_results.csv")
